package fr.unice.polytech.si3.qgl.royal_fortune.tooling.Simulation;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class Main {
	public static void main(String[] args) {
		String json="{\"goal\":{\"mode\":\"REGATTA\",\"checkpoints\":[{\"position\":{\"x\":10.0,\"y\":-350.0,\"orientation\":0.0},\"shape\":{\"type\":\"circle\",\"radius\":85.0,\"orientation\":0.0,\"vertices\":[{\"x\":85.0,\"y\":0.0},{\"x\":78.52976026345937,\"y\":32.52809175103263},{\"x\":60.10407640085654,\"y\":60.104076400856535},{\"x\":32.52809175103263,\"y\":78.52976026345937},{\"x\":5.204748896376251E-15,\"y\":85.0},{\"x\":-32.528091751032626,\"y\":78.52976026345937},{\"x\":-60.104076400856535,\"y\":60.10407640085654},{\"x\":-78.52976026345937,\"y\":32.52809175103264},{\"x\":-85.0,\"y\":1.0409497792752502E-14},{\"x\":-78.52976026345938,\"y\":-32.52809175103262},{\"x\":-60.104076400856556,\"y\":-60.104076400856535},{\"x\":-32.528091751032676,\"y\":-78.52976026345935},{\"x\":-1.5614246689128753E-14,\"y\":-85.0},{\"x\":32.52809175103265,\"y\":-78.52976026345937},{\"x\":60.10407640085653,\"y\":-60.104076400856556},{\"x\":78.52976026345935,\"y\":-32.52809175103268}]}},{\"position\":{\"x\":-150.0,\"y\":1250.0,\"orientation\":0.0},\"shape\":{\"type\":\"circle\",\"radius\":85.0,\"orientation\":0.0,\"vertices\":[{\"x\":85.0,\"y\":0.0},{\"x\":78.52976026345937,\"y\":32.52809175103263},{\"x\":60.10407640085654,\"y\":60.104076400856535},{\"x\":32.52809175103263,\"y\":78.52976026345937},{\"x\":5.204748896376251E-15,\"y\":85.0},{\"x\":-32.528091751032626,\"y\":78.52976026345937},{\"x\":-60.104076400856535,\"y\":60.10407640085654},{\"x\":-78.52976026345937,\"y\":32.52809175103264},{\"x\":-85.0,\"y\":1.0409497792752502E-14},{\"x\":-78.52976026345938,\"y\":-32.52809175103262},{\"x\":-60.104076400856556,\"y\":-60.104076400856535},{\"x\":-32.528091751032676,\"y\":-78.52976026345935},{\"x\":-1.5614246689128753E-14,\"y\":-85.0},{\"x\":32.52809175103265,\"y\":-78.52976026345937},{\"x\":60.10407640085653,\"y\":-60.104076400856556},{\"x\":78.52976026345935,\"y\":-32.52809175103268}]}}]},\"ship\":{\"name\":\"Moby Dick\",\"deck\":{\"width\":2,\"length\":4},\"entities\":[{\"type\":\"oar\",\"x\":1,\"y\":0},{\"type\":\"oar\",\"x\":1,\"y\":1},{\"type\":\"oar\",\"x\":2,\"y\":0},{\"type\":\"oar\",\"x\":2,\"y\":1},{\"type\":\"oar\",\"x\":3,\"y\":0},{\"type\":\"oar\",\"x\":3,\"y\":1}],\"type\":\"ship\",\"position\":{\"x\":0.0,\"y\":0.0,\"orientation\":0.0},\"shape\":{\"type\":\"rectangle\",\"width\":2.0,\"height\":4.0,\"orientation\":0.0,\"vertices\":[{\"x\":-2.0,\"y\":-1.0},{\"x\":2.0,\"y\":-1.0},{\"x\":2.0,\"y\":1.0},{\"x\":-2.0,\"y\":1.0}]},\"life\":300},\"sailors\":[{\"id\":0,\"x\":2,\"y\":1,\"name\":\"Marin0\"},{\"id\":1,\"x\":0,\"y\":0,\"name\":\"Marin1\"},{\"id\":2,\"x\":1,\"y\":0,\"name\":\"Marin2\"},{\"id\":3,\"x\":2,\"y\":0,\"name\":\"Marin3\"}],\"shipCount\":1}";
		Game game = new Game(json);
		String textForOutput = game.getAllCheckpointsForOutput()+"---\n";
		while (!game.isFinished()) {
			game.nextRound();
			System.out.println(game);
			textForOutput += game.toString();
		}

		BufferedWriter writer;
		try {
			writer = new BufferedWriter(new FileWriter("output.txt"));
			writer.write(textForOutput);
			writer.close();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}
}
